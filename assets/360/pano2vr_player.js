//////////////////////////////////////////////////////////////////////
// Pano2VR HTML5/CSS3 & WebGL Panorama Player 3.1.3/1941            //
// License: marco velasquez                                         //
// (c) 2012, Garden Gnome Software, http://gardengnomesoftware.com  //
//////////////////////////////////////////////////////////////////////

var j=!0,k=null,s=!1;function Ra(){this.y=this.x=0;this.c=-100;this.set=function(f,m,h){this.x=f;this.y=m;this.c=h};this.o=function(f){var m=Math.sin(f),f=Math.cos(f),h=this.y,n=this.c;this.y=f*h-m*n;this.c=m*h+f*n};this.p=function(f){var m=Math.sin(f),f=Math.cos(f),h=this.x,n=this.c;this.x=f*h+m*n;this.c=-m*h+f*n}}glMatrixArrayType="undefined"!=typeof Float32Array?Float32Array:"undefined"!=typeof WebGLFloatArray?WebGLFloatArray:Array;
function Eb(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1}
function Fb(f,m,h){var n,z=h[0],C=h[1],h=h[2],H=Math.sqrt(z*z+C*C+h*h);if(H){1!=H&&(H=1/H,z*=H,C*=H,h*=H);var U=Math.sin(m),ja=Math.cos(m),N=1-ja,m=f[0],H=f[1],Aa=f[2],Ba=f[3],Ca=f[4],Da=f[5],Ea=f[6],ka=f[7],Fa=f[8],Ga=f[9],Ha=f[10],u=f[11],ea=z*z*N+ja,V=C*z*N+h*U,fa=h*z*N-C*U,ga=z*C*N-h*U,K=C*C*N+ja,W=h*C*N+z*U,R=z*h*N+C*U,z=C*h*N-z*U,C=h*h*N+ja;n?f!=n&&(n[12]=f[12],n[13]=f[13],n[14]=f[14],n[15]=f[15]):n=f;n[0]=m*ea+Ca*V+Fa*fa;n[1]=H*ea+Da*V+Ga*fa;n[2]=Aa*ea+Ea*V+Ha*fa;n[3]=Ba*ea+ka*V+u*fa;n[4]=
m*ga+Ca*K+Fa*W;n[5]=H*ga+Da*K+Ga*W;n[6]=Aa*ga+Ea*K+Ha*W;n[7]=Ba*ga+ka*K+u*W;n[8]=m*R+Ca*z+Fa*C;n[9]=H*R+Da*z+Ga*C;n[10]=Aa*R+Ea*z+Ha*C;n[11]=Ba*R+ka*z+u*C}}
function Gb(){var f="perspective",m=["Webkit","Moz","O","ms","Ms"],h;h=s;for(h=0;h<m.length;h++)"undefined"!==typeof document.documentElement.style[m[h]+"Perspective"]&&(f=m[h]+"Perspective");"undefined"!==typeof document.documentElement.style[f]?"webkitPerspective"in document.documentElement.style?(f=document.createElement("style"),m=document.createElement("div"),h=document.head||document.getElementsByTagName("head")[0],f.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",h.appendChild(f),
m.id="ggswhtml5",document.documentElement.appendChild(m),h=5===m.offsetHeight,f.parentNode.removeChild(f),m.parentNode.removeChild(m)):h=j:h=s;return h}function Vb(){var f;if(f=!!window.WebGLRenderingContext)try{var m=document.createElement("canvas");m.width=100;m.height=100;var h=m.getContext("webgl");h||(h=m.getContext("experimental-webgl"));f=h?j:s}catch(n){f=s}return f}
function pano2vrPlayer(f){function m(a){var c=-1;try{for(var b=0;b<g.length;b++)g[b].id==a.id&&g[b].obj!=k&&g[b].url==a.url&&g[b].loop==a.loop&&g[b].mode==a.mode&&(c=b);if(-1==c){for(b=0;b<g.length;b++)if(g[b].id==a.id&&g[b].obj!=k){try{g[b].obj.pause()}catch(d){la(d)}try{g[b].obj.parentElement.removeChild(g[b].obj),delete g[b].obj,g[b].obj=k}catch(e){la(e)}c=b}a.obj=document.createElement("audio");a.obj.setAttribute("src",K(a.url));a.obj.volume=a.b*X;0==a.loop&&(a.obj.d=1E7);1<=a.loop&&(a.obj.d=
a.loop-1);if((1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop)a.obj.autoplay=j;0<=c?g[c]=a:g.push(a);D.appendChild(a.obj);a.obj.addEventListener("ended",function(){0<this.d&&(this.d--,this.currentTime=0,this.load(),this.play())},s);la(a.obj)}}catch(f){la(f)}}function h(){var a;a=document.createElement("div");a.innerHTML=Wb("PGRpdiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwcHg7IHJpZ2h0OiAwcHg7IHRvcDogMHB4OyBib3R0b206IDBweDsgbWFyZ2luOiBhdXRvOyB3aWR0aDogMThlbTsgaGVpZ2h0OiA0ZW07IGJvcmRlcjogM3B4IHNvbGlkICM1NTU7IGJveC1zaGFkb3c6IDVweCA1cHggMTBweCAjMzMzOyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgZGlzcGxheTogdGFibGU7IGZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDEwcHQ7IG9wYWNpdHk6IDAuOTU7IGJvcmRlci1yYWRpdXM6IDE1cHg7Ij48cCBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiB0YWJsZS1jZWxsOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyAiPkNyZWF0ZWQgd2l0aCA8YSBocmVmPSJodHRwOi8vcGFubzJ2ci5jb20vIiB0YXJnZXQ9Il9ibGFuayI+UGFubzJWUjwvYT48L3A+PC9kaXY+");
a.setAttribute("id","about");a.setAttribute("style","top:  0px;left: 0px;width: 100px;height: 100px;overflow: hidden;position:relative;");D.replaceChild(a,G);a.style.width=0+ma+db+A+"px";a.style.height=0+na+eb+t+"px";a.onclick=function(){D.replaceChild(G,a)};a.oncontextmenu=function(){D.replaceChild(G,a)}}function n(){setTimeout(function(){d.setFullscreen(s)},10);setTimeout(function(){d.setFullscreen(s)},100)}function z(){Xb(z);0<=E&&(ha?(O=0.4*(Y-Ia),P=0.4*(Z-Ja),Ia+=O,Ja+=P,V(O,P)):(O=0.1*-oa,P=
0.1*-pa,V(0.1*-oa,0.1*-pa)),d.dirty=j);Sa&&(d.changeFov(0.4*(L-l)),0.0010>Math.abs(L-l)/l&&(Sa=s),d.dirty=j);if(fb&&(0!=O||0!=P)&&0>E)O*=0.9,P*=0.9,0.1>O*O+P*P?P=O=0:(V(O,P),d.dirty=j);if(0!=qa){switch(qa){case 37:d.changePan(1,j);break;case 38:d.changeTilt(1,j);break;case 39:d.changePan(-1,j);break;case 40:d.changeTilt(-1,j);break;case 43:case 107:case 16:d.changeFovLog(-1,j);break;case 17:case 18:case 109:case 45:case 91:d.changeFovLog(1,j)}d.dirty=j}if(!d.isLoaded&&d.hasConfig){var a,c=0;Ta&&(d.finalPanorama(),
Ta=s);for(a=0;a<d.checkLoaded.length;a++)d.checkLoaded[a].complete&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC"!=d.checkLoaded[a].src&&c++;c==d.checkLoaded.length?(Ua=1,d.isLoaded=j,d.divSkin&&d.divSkin.ggLoaded&&d.divSkin.ggLoaded()):Ua=c/(1*d.checkLoaded.length)}for(;360<p;)p-=360;for(;-360>p;)p+=360;if(Ka){q=gb-p;if(360==ra-sa){for(;-180>q;)q+=360;for(;180<q;)q-=360}B=hb-
o;y=ib-l;a=Math.sqrt(q*q+B*B+y*y);if(10*a<Va){if(Ka=s,y=B=q=0,d.onMoveComplete)d.onMoveComplete()}else a=a>5*Va?Va/a:0.2,q*=a,B*=a,y*=a;p+=q;o+=B;l+=y;a=new Date;jb=a.getTime();d.dirty=j}else if(Q)B=Wa*(0-o)/100,y=Wa*(Xa-l)/100,q=0.95*q+0.05*-$,p+=q,o+=B,l+=y,d.dirty=j;else if(La&&(a=new Date,0>E&&a.getTime()-jb>1E3*kb&&(Q=j,y=B=q=0)),fb&&0==qa&&0>E&&(0!=q||0!=B||0!=y))q*=0.9,B*=0.9,y*=0.9,p+=q,o+=B,d.changeFovLog(y),1.0E-4>q*q+B*B+y*y&&(y=B=q=0),d.dirty=j;Hb&&(a=new Date,Ya?a.getTime()-lb>=1E3*Ib&&
(Ya=s):(ia+=ta,0>ia&&(ia=0,ta=-ta,Ya=j,lb=a.getTime()),1<ia&&(ia=1,ta=-ta,Ya=j,lb=a.getTime()),d.setOverlayOpacity(ia)));d.dirty&&(d.dirty=s,d.updatePanorama())}function C(){qa=0}function H(){qa=0;u()}function U(a){Za||(qa=a.keyCode,u())}function ja(a){I||(a.preventDefault(),u())}function N(a){I||(a.preventDefault(),Sa=j,L=$a/Math.sqrt(event.scale),L>S&&(L=S),L<T&&(L=T),d.dirty=j,u())}function Aa(a){mb=j;I||(a.preventDefault(),$a=l,u())}function Ba(a){I||(a.preventDefault(),E=-2)}function Ca(a){if(!I){a.preventDefault();
0<=E&&u();var c=(new Date).getTime(),a=-1,a=Math.abs(Jb-Ma)+Math.abs(Kb-Na);if(0<=a&&20>a){if(d.a){a=d.a;for(flag=s;a&&a!=d.control;)a.onclick&&!flag&&(a.onclick(),flag=j),a=a.parentNode}a=Math.abs(Lb-Ma)+Math.abs(Mb-Na);if(700>c-d.f&&0<=a&&20>a){d.a==d.control&&nb&&setTimeout(function(){d.toggleFullscreen()},1);if(d.a){a=d.a;for(flag=s;a&&a!=d.control;)a.ondblclick&&!flag&&(a.ondblclick(),flag=j),a=a.parentNode}d.f=0}else d.f=c;Lb=Ma;Mb=Na}if(d.a){a=d.a;for(flag=s;a&&a!=d.control;){if(a.onmouseout)a.onmouseout();
a.onmouseup&&!flag&&(a.onmouseup(),flag=j);a=a.parentNode}}d.a=k;E=-11}}function Da(a){a||(a=window.event);var c=a.touches,b=ab();d.mouse.x=c[0].pageX-b.x;d.mouse.y=c[0].pageY-b.y;if(!I){a.preventDefault();c[0]&&(Ma=c[0].pageX,Na=c[0].pageY);if(0<=E){a.preventDefault();for(a=0;a<c.length;a++)if(c[a].identifier==E){ea(c[a].pageX,c[a].pageY);break}u()}2==c.length&&c[0]&&c[1]&&(E=-6,mb||(Nb=Math.sqrt((c[0].pageX-c[1].pageX)*(c[0].pageX-c[1].pageX)+(c[0].pageY-c[1].pageY)*(c[0].pageY-c[1].pageY)),Sa=
j,L=$a*Math.sqrt(Ob/Nb),L>S&&(L=S),L<T&&(L=T),u()))}}function Ea(a){a||(a=window.event);var c=a.touches,b=ab();d.mouse.x=c[0].pageX-b.x;d.mouse.y=c[0].pageY-b.y;if(!I){a.preventDefault();if(0>E&&c[0]&&(ob=(new Date).getTime(),Jb=c[0].pageX,Kb=c[0].pageY,Ma=c[0].pageX,Na=c[0].pageY,d.a=c[0].target,c[0].target==d.control&&(a=c[0].pageX,b=c[0].pageY,pb=a,qb=b,Y=a,Z=b,Ia=a,Ja=b,E=c[0].identifier,u()),d.a)){a=d.a;for(flag=s;a&&a!=d.control;){if(a.onmouseover)a.onmouseover();a.onmousedown&&!flag&&(a.onmousedown(),
flag=j);a=a.parentNode}}1<c.length&&(E=-5);!mb&&2==c.length&&c[0]&&c[1]&&(Ob=Math.sqrt((c[0].pageX-c[1].pageX)*(c[0].pageX-c[1].pageX)+(c[0].pageY-c[1].pageY)*(c[0].pageY-c[1].pageY)),$a=l);pa=oa=0}}function ka(a){if(!rb){var a=a?a:window.event,c=a.detail?-1*a.detail:a.wheelDelta/40;Pb&&(c=-c);d.changeFovLog((0<c?1:-1)*Qb,j);d.dirty=j;a.preventDefault();u()}}function Fa(a){if(!I&&(a=a?a:window.event,a.preventDefault(),0<=E)){E=-3;pa=oa=0;var a=(new Date).getTime(),c=-1,c=Math.abs(pb-Y)+Math.abs(qb-
Z);400>a-ob&&0<=c&&20>c&&(c=Math.abs(Rb-Y)+Math.abs(Sb-Z),700>a-d.f&&0<=c&&20>c?(nb&&setTimeout(function(){d.toggleFullscreen()},10),d.f=0):d.f=a,Rb=Y,Sb=Z);u()}}function Ga(a){var c=ab();d.mouse.x=a.pageX-c.x;d.mouse.y=a.pageY-c.y;I||(a=a?a:window.event,a.preventDefault(),0<=E&&((a.which||0==a.which||1==a.which)&&ea(a.pageX,a.pageY),u()))}function Ha(a){if(!I){a=a?a:window.event;a.preventDefault();if((a.which||0==a.which||1==a.which)&&a.target==d.control){var c=a.pageX,a=a.pageY;pb=c;qb=a;Y=c;Z=
a;Ia=c;Ja=a;E=1;ob=(new Date).getTime();u()}pa=oa=0}}function u(){Q&&(Q=s,y=B=q=0);Ka&&(Ka=s,y=B=q=0);jb=(new Date).getTime()}function ea(a,c){sb=a;tb=c;oa=sb-Y;pa=tb-Z;ha&&(Y=sb,Z=tb)}function V(a,c){var b=d.getVFov();p+=a*b/t;o+=c*b/t;R()}function fa(a){ub=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,ub);vertices=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(i=0;12>i;i++)2>i%3&&(vertices[i]*=a);e.bufferData(e.ARRAY_BUFFER,new Float32Array(vertices),e.STATIC_DRAW);vb=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,
vb);e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,0,1,1,1]),e.STATIC_DRAW);wb=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,wb);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),e.STATIC_DRAW)}function ga(){var a,c;Oa=[];for(var b=0;6>b;b++)c=e.createTexture(),c.i=k,c.g=k,c.m=s,a=new Image,a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC",c.v=
a,a.addEventListener("load",W(c),s),ua[b]&&(a=new Image,a.src=K(ua[b]),c.i=a,a.addEventListener("load",W(c),s),d.checkLoaded.push(a)),Oa.push(c);for(b=0;6>b;b++)Pa[b]&&(a=new Image,a.src=K(Pa[b]),a.addEventListener("load",W(Oa[b]),s),Oa[b].g=a,d.checkLoaded.push(a))}function K(a){return a?"/"==a.charAt(0)||0<a.indexOf("://")?a:va+a:va}function W(a){return function(){try{e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,j),e.bindTexture(e.TEXTURE_2D,a),a.g!=k&&a.g.complete?a.m||(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,
e.RGBA,e.UNSIGNED_BYTE,a.g),a.m=j):a.i!=k&&a.i.complete?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a.i):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a.v),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,k),d.dirty=j}catch(c){}}}function R(){var a,c;
l<T&&(l=T);l>S&&(l=S);c=d.getVFov()/2;a=180*Math.atan(A/t*Math.tan(c*Math.PI/180))/Math.PI;2*c>aa-ba&&(c=(aa-ba)/2);d.setVFov(2*c);90>aa?o+c>aa&&(o=aa-c):o>aa&&(o=aa);-90<ba?o-c<ba&&(o=ba+c):o<ba&&(o=ba);if(359.99>ra-sa){var b=0;if(0!=o){var e,f=t/2;e=f*Math.tan(c*Math.PI/180);f/=Math.tan(Math.abs(o)*Math.PI/180);f-=e;0<f&&(b=180*Math.atan(1/(f/e))/Math.PI,b=b*(ra-sa)/360)}p+(a+b)>ra&&(p=ra-(a+b),Q&&($=-$,q=0));p-(a+b)<sa&&(p=sa+(a+b),Q&&($=-$,q=0));90<o+c&&(o=90-c);-90>o-c&&(o=-90+c)}}function ab(){var a=
{x:0,y:0},c=r;if(c.offsetParent){do a.x+=c.offsetLeft,a.y+=c.offsetTop;while(c=c.offsetParent)}return a}function wa(){d.setViewerSize(d.e.offsetWidth,d.e.offsetHeight)}function la(a){if(debug=document.getElementById("debug"))debug.innerHTML=a+"<br />";window.console&&window.console.log(a)}function Wb(a){var c="",b,d,e="",f,g="",h=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),
f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),b=b<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,c+=String.fromCharCode(b),64!=f&&(c+=String.fromCharCode(d)),64!=g&&(c+=String.fromCharCode(e));while(h<a.length);return c}function Yb(a,c){var b=this;b.B=a;b.hotspot=c;this.__div=document.createElement("div");b.j=document.createElement("img");var d;b.j.setAttribute("src",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.j.setAttribute("style","position: absolute;top: -14px;left: -14px;");this.__div.appendChild(b.j);d="position:absolute;"+(F+"user-select: none;");this.__div.setAttribute("style",d);this.__div.onclick=function(){b.B.openUrl(c.url,c.target)};b.text=document.createElement("div");d="position:absolute;"+("left: -"+c.w/2+"px;");d=d+"top:  20px;"+("width: "+c.w+"px;");d=0==c.h?d+"height: auto;":d+("height: "+c.h+"px;");c.wordwrap?d=d+"white-space: pre-wrap;"+("width: "+c.w+"px;"):(d=0==c.h?d+"width: auto;":
d+("width: "+c.w+"px;"),d+="white-space: nowrap;");d+=F+"transform-origin: 50% 50%;";b.text.setAttribute("style",d+"visibility: hidden;border: 1px solid #000000;background-color: #ffffff;text-align: center;overflow: hidden;padding: 0px 1px 0px 1px;");b.text.innerHTML=c.title;this.__div.onmouseover=function(){0==c.h&&(w=b.text.offsetWidth,b.text.style.left=-w/2+"px");b.text.style.visibility="inherit"};this.__div.onmouseout=function(){b.text.style.visibility="hidden"};this.__div.appendChild(b.text)}
var d=this;this.transitionsDisabled=s;var p=0,xb=0,sa=0,ra=360,q=0,o=0,yb=0,ba=-90,aa=90,B=0,l=90,Xa=90,T=1,S=170,$a=0,y=0,zb=0,Ob,Nb,A=320,t=480,pb=0,qb=0,Y=0,Z=0,Rb=0,Sb=0,sb=0,tb=0,oa=0,pa=0,E=-1,Jb=0,Kb=0,Ma=0,Na=0,Lb=0,Mb=0,ob,fb=j,Ia=0,Ja=0,O=0,P=0,Sa=s,L=0,qa=0,r=k,ca=k,D=k,da=k,M=k,G=k;this.control=k;this.cubeFaces=[];this.cubeFacesOverlay=[];this.checkLoaded=[];this.dirty=this.isFullscreen=s;this.divSkin=k;this.hasConfig=this.isLoaded=s;this.onMoveComplete=k;var Ua=0,Pa=[],Ab=[],ua=[],Bb=
1,Qa=1,Ta=s,La=s,kb=5,Q=s,$=0.4,Wa=0,Ka=s,Va=0.1,gb=0,hb=0,ib,jb;this.skinObj=k;this.userdata={title:"",description:"",author:"",datetime:"",copyright:"",source:"",information:"",comment:""};var J=[];this.emptyHotspot={pan:0,tilt:0,title:"",url:"",target:"",id:"",skinid:"",w:100,h:20,wordwrap:s,obj:k};var g=[],X=1,ia=0,ta=0.01,Ib=2,lb=0,Ya=s,Hb=s,ma=0,na=0,db=0,eb=0,Za=s,I=s,rb=s,ha=j,Pb=s,Qb=1,nb=j;this.hotspot=this.emptyHotspot;this.mouse={x:0,y:0};var xa=s,Tb=s,Ub=j,mb=s,va="",F="",Cb="transition",
ya="transform",Db="perspective",e,Xb=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,10)}}();this.detectBrowser=function(){var a=["Webkit","Moz","O","ms","Ms"],c;F="";Cb="transition";ya="transform";Db="perspective";for(c=0;c<a.length;c++)"undefined"!==typeof document.documentElement.style[a[c]+"Transform"]&&(F="-"+a[c].toLowerCase()+"-",
Cb=a[c]+"Transition",ya=a[c]+"Transform",Db=a[c]+"Perspective");Tb=Gb();xa=Vb();la((Tb?"CSS 3D available":"CSS 3D not available")+", "+(xa?"WebGL available":"WebGL not available"))};this.getPercentLoaded=function(){return Ua};this.setBasePath=function(a){va=a};this.l=function(){return 1*t/(2*Math.tan(Math.PI/180*(d.getVFov()/2)))};this.setViewerSize=function(a,c){d.isFullscreen&&(a=window.innerWidth,c=window.innerHeight);var b=a-ma-db,f=c-na-eb;r.style.width=b+"px";r.style.height=f+"px";r.style.left=
ma+"px";r.style.top=na+"px";if(xa)try{ca.width=b,ca.height=f,e&&(e.t=b,e.s=f,e.viewport(0,0,b,f))}catch(g){alert(g)}G.style.width=a+"px";G.style.height=c+"px";d.updatePanorama();d.divSkin&&d.divSkin.ggUpdateSize&&d.divSkin.ggUpdateSize(a,c)};this.setMargins=function(a,c,b,d){ma=a;na=c;db=b;eb=d;wa()};this.changeViewMode=function(a){0==a&&(ha=s);1==a&&(ha=j);2==a&&(ha=ha?s:j)};this.getVFov=function(){var a;switch(zb){case 0:a=l/2;break;case 1:a=180*Math.atan(t/A*Math.tan(l/2*Math.PI/180))/Math.PI;
break;case 2:a=180*Math.atan(t/Math.sqrt(A*A+t*t)*Math.tan(l/2*Math.PI/180))/Math.PI;break;case 3:a=4*t/3>A?l/2:180*Math.atan(4*t/(3*A)*Math.tan(l/2*Math.PI/180))/Math.PI}return 2*a};this.setVFov=function(a){var a=a/2,c;switch(zb){case 0:l=2*a;break;case 1:a=180*Math.atan(A/t*Math.tan(a*Math.PI/180))/Math.PI;l=2*a;break;case 2:c=Math.sqrt(A*A+t*t);a=180*Math.atan(c/t*Math.tan(a*Math.PI/180))/Math.PI;l=2*a;break;case 3:4*t/3>A||(a=180*Math.atan(3*A/(4*t)*Math.tan(a*Math.PI/180))/Math.PI),l=2*a}};this.updatePanorama=
function(){for(var a=new Ra,c=d.l(),b=0;b<J.length;b++){var f=J[b];a.set(0,0,-100);a.o(-f.tilt*Math.PI/180);a.p(f.pan*Math.PI/180);a.p(-p*Math.PI/180);a.o(o*Math.PI/180);var g=s;if(0.1>a.c){var h=-c/a.c,l=a.x*h,h=a.y*h;Math.abs(l)<A/2+500&&Math.abs(h)<t/2+500&&(g=j)}else h=l=0;f.obj&&f.obj.__div&&(f.obj.__div.style[Cb]="none",g?(f.obj.__div.style.left=ma+l+A/2+"px",f.obj.__div.style.top=na+h+t/2+"px"):(f.obj.__div.style.left="-100px",f.obj.__div.style.top="-100px"))}if(xa){R();if(A!=r.offsetWidth||
t!=r.offsetHeight)A=parseInt(r.offsetWidth),t=parseInt(r.offsetHeight);if(Ub){Ub=s;try{if((e=ca.getContext("webgl"))||(e=ca.getContext("experimental-webgl")),e){e.t=500;e.s=500;e.clearColor(0,0,0,0);e.enable(e.DEPTH_TEST);e.viewport(0,0,500,500);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);e.enable(e.TEXTURE_2D);var m=e.createShader(e.FRAGMENT_SHADER);hs="#ifdef GL_ES\n";hs+="precision highp float;\n";hs+="#endif\n";hs+="varying vec2 vTextureCoord;\n";hs+="uniform sampler2D uSampler;\n";hs+="void main(void) {\n";
hs+="    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n";hs+="}\n";e.shaderSource(m,hs);e.compileShader(m);e.getShaderParameter(m,e.COMPILE_STATUS)||(alert(e.getShaderInfoLog(m)),m=k);var n=e.createShader(e.VERTEX_SHADER);hs="attribute vec3 aVertexPosition;\n";hs+="attribute vec2 aTextureCoord;\n";hs+="uniform mat4 uMVMatrix;\n";hs+="uniform mat4 uPMatrix;\n";hs+="varying vec2 vTextureCoord;\n";hs+="void main(void) {\n";hs+="    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n";
hs+="    vTextureCoord = aTextureCoord;\n";hs+="}\n";e.shaderSource(n,hs);e.compileShader(n);e.getShaderParameter(n,e.COMPILE_STATUS)||(alert(e.getShaderInfoLog(n)),n=k);x=e.createProgram();e.attachShader(x,n);e.attachShader(x,m);e.linkProgram(x);e.getProgramParameter(x,e.LINK_STATUS)||alert("Could not initialise shaders");e.useProgram(x);x.r=e.getAttribLocation(x,"aVertexPosition");e.enableVertexAttribArray(x.r);x.q=e.getAttribLocation(x,"aTextureCoord");e.enableVertexAttribArray(x.q);x.n=e.getUniformLocation(x,
"uPMatrix");x.z=e.getUniformLocation(x,"uMVMatrix");x.C=e.getUniformLocation(x,"uSampler");fa(Qa);ga()}}catch(q){la(q)}e||alert("Could not initialise WebGL!");wa()}if(e){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);Eb(bb);f=d.getVFov();c=e.t/e.s;f=0.1*Math.tan(f*Math.PI/360);c*=f;a=-c;b=-f;(g=bb)||(g=new glMatrixArrayType(16));l=c-a;m=f-b;g[0]=0.2/l;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=0.2/m;g[6]=0;g[7]=0;g[8]=(c+a)/l;g[9]=(f+b)/m;g[10]=-100.1/99.9;g[11]=-1;g[12]=0;g[13]=0;g[14]=-20/99.9;g[15]=0;e.uniformMatrix4fv(x.n,
s,bb);for(v=0;6>v;v++)Eb(za),Fb(za,-o*Math.PI/180,[1,0,0]),Fb(za,(180-p)*Math.PI/180,[0,1,0]),4>v?Fb(za,-Math.PI/2*v,[0,1,0]):Fb(za,Math.PI/2*(5==v?1:-1),[1,0,0]),e.bindBuffer(e.ARRAY_BUFFER,ub),e.vertexAttribPointer(x.r,3,e.FLOAT,s,0,0),e.bindBuffer(e.ARRAY_BUFFER,vb),e.vertexAttribPointer(x.q,2,e.FLOAT,s,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,Oa[v]),e.uniform1i(x.C,0),e.uniformMatrix4fv(x.z,s,za),e.uniformMatrix4fv(x.n,s,bb),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,wb),e.drawElements(e.TRIANGLES,
6,e.UNSIGNED_SHORT,0)}}else{R();a=s;if(A!=r.offsetWidth||t!=r.offsetHeight)A=parseInt(r.offsetWidth),t=parseInt(r.offsetHeight),r.style[ya+"OriginX"]=A/2+"px",r.style[ya+"OriginY"]=t/2+"px",a=j;c=Math.round(d.l());if(d.k!=c||a)d.k=c,r.style[Db]=c;M&&(M.style[ya]="translate3d("+A/2+"px,"+t/2+"px,"+c+"px)");da&&(da.style[ya]="rotateX("+Number(o).toFixed(10)+"deg)  rotateY("+Number(-p).toFixed(10)+"deg)")}};var x,Oa=[],za=new glMatrixArrayType(16),bb=new glMatrixArrayType(16),ub,vb,wb;this.getPan=function(){return p};
this.getPanDest=function(){return gb};this.getPanN=function(){for(var a=p;-180>a;)a+=360;for(;180<a;)a-=360;return a};this.setPan=function(a){u();isNaN(a)||(p=Number(a));d.dirty=j};this.changePan=function(a,c){d.setPan(d.getPan()+a);c&&(q=a)};this.getTilt=function(){return o};this.getTiltDest=function(){return hb};this.setTilt=function(a){u();isNaN(a)||(o=Number(a));d.dirty=j};this.changeTilt=function(a,c){d.setTilt(d.getTilt()+a);c&&(B=a)};this.getFov=function(){return l};this.getFovDest=function(){return ib};
this.setFov=function(a){u();if(!isNaN(a)&&0<a&&180>a){var c=l;l=Number(a);R();d.dirty|=c!=l}};this.changeFov=function(a,c){d.setFov(d.getFov()+a);c&&(y=a)};this.changeFovLog=function(a,c){if(!isNaN(a)){var b;b=a/90*Math.cos(l*Math.PI/360);b=l*Math.exp(b);d.setFov(b);c&&(y=a)}};this.setPanTilt=function(a,c){u();isNaN(a)||(p=a);isNaN(c)||(o=c);d.dirty=j};this.setPanTiltFov=function(a,c,b){u();isNaN(a)||(p=a);isNaN(c)||(o=c);!isNaN(b)&&0<b&&180>b&&(l=b);d.dirty=j};this.setDefaultView=function(){d.setPanTiltFov(xb,
yb,Xa)};this.setLocked=function(a){d.setLockedMouse(a);d.setLockedWheel(a);d.setLockedKeyboard(a)};this.setLockedMouse=function(a){I=a};this.setLockedKeyboard=function(a){Za=a};this.setLockedWheel=function(a){rb=a};this.moveTo=function(a,c,b,d){u();Ka=j;var e=a.toString().split("/");1<e.length&&(a=Number(e[0]),d=c,c=Number(e[1]),2<e.length&&(b=Number(e[2])));gb=isNaN(a)?p:a;hb=isNaN(c)?o:c;ib=!isNaN(b)&&0<b&&180>b?b:l;Va=!isNaN(d)&&0<d?d:1};this.moveToDefaultView=function(a){d.moveTo(xb,yb,Xa,a)};
u();this.u=function(){var a;a=G;d.control=a;n();setTimeout(function(){z()},10);setTimeout(function(){wa();d.updatePanorama()},10);a.addEventListener&&(a.addEventListener("touchstart",Ea,s),a.addEventListener("touchmove",Da,s),a.addEventListener("touchend",Ca,s),a.addEventListener("touchcancel",Ba,s),a.addEventListener("gesturestart",Aa,s),a.addEventListener("gesturechange",N,s),a.addEventListener("gestureend",ja,s),a.addEventListener("mousedown",Ha,s),a.addEventListener("mousemove",Ga,s),document.addEventListener("mouseup",
Fa,s),a.addEventListener("mousedblclick",d.toggleFullscreen,s),a.addEventListener("mousewheel",ka,s),a.addEventListener("DOMMouseScroll",ka,s),document.addEventListener("keydown",U,s),document.addEventListener("keyup",H,s),window.addEventListener("orientationchange",n,s),window.addEventListener("resize",wa,s),window.addEventListener("blur",C,s));a.oncontextmenu=function(a){void 0===a&&(a=window.event);return!a.ctrlKey?(h(),s):j}};this.addHotspotElements=function(){for(var a=0;a<J.length;a++)if(J[a].obj=
d.skinObj&&d.skinObj.addSkinHotspot?new d.skinObj.addSkinHotspot(J[a]):new Yb(this,J[a]),J[a].obj&&J[a].obj.__div){var c=G.firstChild;c?G.insertBefore(J[a].obj.__div,c):G.appendChild(J[a].obj.__div)}};this.playSound=function(a,c){for(var b=-1,d=0;d<g.length;d++)g[d].id==a&&(b=d);0<=b&&(g[b].obj.d=c&&!isNaN(Number(c))?Number(c)-1:g[b].loop-1,-1==g[b].obj.d&&(g[b].obj.d=1E7),g[b].obj.ended&&g[b].obj.load(),g[b].obj.play())};this.pauseSound=function(a){if("_main"==a)for(var c=0;c<g.length;c++)g[c].obj.pause();
else{for(var b=-1,c=0;c<g.length;c++)g[c].id==a&&(b=c);0<=b&&g[b].obj.pause()}};this.stopSound=function(a){if("_main"==a)for(var c=0;c<g.length;c++)g[c].obj.pause(),g[c].obj.currentTime=0;else{for(var b=-1,c=0;c<g.length;c++)g[c].id==a&&(b=c);0<=b&&(g[b].obj.pause(),g[b].obj.currentTime=0)}};this.setVolume=function(a,c){var b=Number(c);1<b&&(b=1);0>b&&(b=0);if("_main"==a){X=b;for(var d=0;d<g.length;d++)g[d].obj.volume=g[d].b*X}else{for(var e=-1,d=0;d<g.length;d++)g[d].id==a&&(e=d);0<=e&&(g[e].b=b,
g[e].obj.volume=b*X)}};this.changeVolume=function(a,c){if("_main"==a){var b=X,b=b+Number(c);1<b&&(b=1);0>b&&(b=0);X=b;for(b=0;b<g.length;b++)g[b].obj.volume=g[b].b*X}else{for(var d=-1,b=0;b<g.length;b++)g[b].id==a&&(d=b);0<=d&&(b=g[d].b,b+=Number(c),1<b&&(b=1),0>b&&(b=0),g[d].b=b,g[d].obj.volume=b*X)}};this.removeHotspots=function(){for(var a;0<J.length;)a=J.pop(),G.removeChild(a.obj.__div),delete a.obj,a.obj=k};this.setFullscreen=function(a){d.isFullscreen!=a&&(d.isFullscreen=a,d.dirty=j);d.isFullscreen?
(D.style.position="absolute",a=ab(),D.style.left=window.pageXOffset-a.x+ma+"px",D.style.top=window.pageYOffset-a.y+na+"px",document.body.style.overflow="hidden",d.divSkin&&d.divSkin.ggEnterFullscreen&&d.divSkin.ggEnterFullscreen()):(D.style.position="relative",D.style.left="0px",D.style.top="0px",document.body.style.overflow="",d.divSkin&&d.divSkin.ggExitFullscreen&&d.divSkin.ggExitFullscreen());wa()};this.toggleFullscreen=function(){d.setFullscreen(!d.isFullscreen)};this.exitFullscreen=function(){d.setFullscreen(s)};
this.startAutorotate=function(a,c,b){Q=La=j;a&&0!=a&&($=a);c&&(kb=c);b&&(Wa=b)};this.stopAutorotate=function(){La=Q=s};this.toggleAutorotate=function(){Q=La=!Q};this.createLayers=function(a){d.e=document.getElementById(a);d.e?(d.e.innerHTML="",D=document.createElement("div"),D.setAttribute("id","viewport"),D.setAttribute("style","top:  0px;left: 0px;position:relative;"),d.e.appendChild(D),xa?(r=document.createElement("div"),a="top:  0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(F+"user-select: none;"),a+="position:absolute;",r.setAttribute("id","viewer"),r.setAttribute("style",a),D.appendChild(r),ca=document.createElement("canvas"),ca.width=100,ca.height=100,r.appendChild(ca)):(r=document.createElement("div"),a="top:  0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;z-index: 0;"+(F+"user-select: none;"),r.setAttribute("id","viewer"),r.setAttribute("style",a),D.appendChild(r)),G=document.createElement("div"),G.setAttribute("id","hotspots"),a=
"top:  0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;z-index: 1000;"+(F+"user-select: none;"),G.setAttribute("style",a),D.appendChild(G),d.divSkin=G):alert("container not found!")};this.createCube=function(){var a;M=document.createElement("div");a="position:absolute;"+(F+"user-select: none;");a+=F+"transform-style: preserve-3d;";M.setAttribute("style",a+"z-Index: 100;");M.setAttribute("id","divPanoview");r.appendChild(M);da=document.createElement("div");a=F+"transform-style: preserve-3d;";
a+=F+"transform-origin: 0 0;";a=a+"position:absolute;"+(F+"user-select: none;");da.setAttribute("style",a+"z-Index: 100;");M.appendChild(da);var c,b;Ta=j;var e=128;Bb>e&&(e=Bb);for(b=0;6>b;b++)c=document.createElement("img"),Ta?""!=ua[b]&&c.setAttribute("src",K(ua[b])):c.setAttribute("src",K(Pa[b])),a="position:absolute;",a+="left: 0px;",a+="top: 0px;",a+="width: "+e+"px;",a+="height: "+e+"px;",a+="z-index: 100;",a+=F+"transform-origin: 0 0;",a+=F+"transform: ",a=4>b?a+("rotateY("+-90*b+"deg)"):a+
("rotateX("+(4==b?-90:90)+"deg)"),a+=" scale("+Qa+") translate3d("+-e/2+"px,"+-e/2+"px,"+-e/2+"px);",c.setAttribute("style",a),da.appendChild(c),d.cubeFaces.push(c),d.checkLoaded.push(c),""!=Ab[b]&&(c=document.createElement("img"),c.setAttribute("src",K(Ab[b])),a="position:absolute;",a+="left: 0px;",a+="top: 0px;",a+="width: "+e/1.1+"px;",a+="height: "+e/1.1+"px;",a+="z-index: 100;",a+=F+"transform-origin: 0 0;",a+=F+"transform: ",a=4>b?a+("rotateY("+-90*b+"deg)"):a+("rotateX("+(4==b?-90:90)+"deg)"),
a+=" scale("+Qa+") translate3d("+-e/2.2+"px,"+-e/2.2+"px,"+-e/2.2+"px);",c.setAttribute("style",a),c.style.opacity=0,da.appendChild(c),d.cubeFacesOverlay.push(c),d.checkLoaded.push(c))};this.finalPanorama=function(){var a;if(M)for(a=0;6>a;a++)d.cubeFaces[a].setAttribute("src",K(Pa[a]))};this.setOverlayOpacity=function(a){var c;if(M)for(c=0;6>c;c++)d.cubeFacesOverlay[c]&&d.cubeFacesOverlay[c].style&&(d.cubeFacesOverlay[c].style.opacity=a)};this.removePanorama=function(){var a;if(M){for(a=0;a<d.cubeFaces.length;a++)d.cubeFaces[a].setAttribute("src",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC"),d.cubeFacesOverlay[a]&&d.cubeFacesOverlay[a].setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC");r.removeChild(M);M=da=k;d.cubeFaces=[];d.cubeFacesOverlay=[]}};this.getScreenResolution=function(){var a=
1;window.devicePixelRatio&&(a=window.devicePixelRatio);return{w:screen.width*a,h:screen.height*a}};this.getMaxScreenResolution=function(){var a=d.getScreenResolution();return a.w>a.h?a.w:a.h};this.readConfigString=function(a){window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(a,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(a));d.readConfigXml(xmlDoc)};this.readConfigUrl=function(a,c){try{var b;b=window.XMLHttpRequest?new XMLHttpRequest:
new ActiveXObject("Microsoft.XMLHTTP");b.open("GET",a,s);b.send(k);var e=b.responseXML;if(e){var f=a.lastIndexOf("/");0<=f&&(va=a.substr(0,f+1));2<=arguments.length&&(va=c);d.readConfigXml(e)}else alert("Error loading panorama XML")}catch(g){alert("Error:"+g)}};var cb=j;this.readConfigXml=function(a){d.removeHotspots();d.removePanorama();d.k=0;for(var a=a.firstChild.firstChild,c,b,f,g=1E6;a;){if("view"==a.nodeName){(b=a.getAttributeNode("fovmode"))&&(zb=Number(b.nodeValue));for(c=a.firstChild;c;)"start"==
c.nodeName&&(b=c.getAttributeNode("pan"),xb=p=Number(b?b.nodeValue:0),b=c.getAttributeNode("tilt"),yb=o=Number(b?b.nodeValue:0),b=c.getAttributeNode("fov"),Xa=l=Number(b?b.nodeValue:70)),"min"==c.nodeName&&(b=c.getAttributeNode("pan"),sa=1*(b?b.nodeValue:0),b=c.getAttributeNode("tilt"),ba=1*(b?b.nodeValue:-90),b=c.getAttributeNode("fov"),T=1*(b?b.nodeValue:5),1.0E-8>T&&(T=1.0E-8)),"max"==c.nodeName&&(b=c.getAttributeNode("pan"),ra=1*(b?b.nodeValue:0),b=c.getAttributeNode("tilt"),aa=1*(b?b.nodeValue:
90),b=c.getAttributeNode("fov"),S=1*(b?b.nodeValue:120),180<=S&&(S=179.9)),c=c.nextSibling}"autorotate"==a.nodeName&&((b=a.getAttributeNode("speed"))&&($=1*b.nodeValue),(b=a.getAttributeNode("delay"))&&(kb=1*b.nodeValue),(b=a.getAttributeNode("returntohorizon"))&&(Wa=1*b.nodeValue),cb&&0!=$&&(Q=La=j));"input"==a.nodeName&&(f||(f=a));if(f)for(c=0;6>c;c++)b=f.getAttributeNode("prev"+c+"url"),ua[c]=b?new String(b.nodeValue):"";"altinput"==a.nodeName&&(c=0,(b=a.getAttributeNode("screensize"))&&(c=1*b.nodeValue),
0<c&&c>=d.getMaxScreenResolution()&&c<g&&(g=c,f=a));"control"==a.nodeName&&cb&&((b=a.getAttributeNode("simulatemass"))&&(fb=1==b.nodeValue),(b=a.getAttributeNode("locked"))&&(I=1==b.nodeValue),b&&(Za=1==b.nodeValue),(b=a.getAttributeNode("lockedmouse"))&&(I=1==b.nodeValue),(b=a.getAttributeNode("lockedkeyboard"))&&(Za=1==b.nodeValue),(b=a.getAttributeNode("lockedwheel"))&&(rb=1==b.nodeValue),(b=a.getAttributeNode("invertwheel"))&&(Pb=1==b.nodeValue),(b=a.getAttributeNode("speedwheel"))&&(Qb=1*b.nodeValue),
(b=a.getAttributeNode("invertcontrol"))&&(ha=1==b.nodeValue),(b=a.getAttributeNode("dblclickfullscreen"))&&(nb=1==b.nodeValue));"overlay"==a.nodeName&&((b=a.getAttributeNode("blendspeed"))&&(ta=1*b.nodeValue),(b=a.getAttributeNode("auto"))&&(Hb=1==b.nodeValue),(b=a.getAttributeNode("delay"))&&(Ib=1*b.nodeValue));"userdata"==a.nodeName&&(b=a.getAttributeNode("title"),d.userdata.title=b?b.nodeValue.toString():"",b=a.getAttributeNode("description"),d.userdata.description=b?b.nodeValue.toString():"",
b=a.getAttributeNode("author"),d.userdata.author=b?b.nodeValue.toString():"",b=a.getAttributeNode("datetime"),d.userdata.datetime=b?b.nodeValue.toString():"",b=a.getAttributeNode("copyright"),d.userdata.copyright=b?b.nodeValue.toString():"",b=a.getAttributeNode("source"),d.userdata.source=b?b.nodeValue.toString():"",b=a.getAttributeNode("info"),d.userdata.information=b?b.nodeValue.toString():"",b=a.getAttributeNode("comment"),d.userdata.comment=b?b.nodeValue.toString():"");if("hotspots"==a.nodeName)for(c=
a.firstChild;c;){if("hotspot"==c.nodeName){var h={pan:0,tilt:0,url:"",target:"",id:"",skinid:"",w:100,h:20,wordwrap:s,obj:k};b=c.getAttributeNode("pan");h.pan=1*(b?b.nodeValue:0);b=c.getAttributeNode("tilt");h.tilt=1*(b?b.nodeValue:0);(b=c.getAttributeNode("url"))&&(h.url=b.nodeValue.toString());(b=c.getAttributeNode("target"))&&(h.target=b.nodeValue.toString());(b=c.getAttributeNode("title"))&&(h.title=b.nodeValue.toString());(b=c.getAttributeNode("id"))&&(h.id=b.nodeValue.toString());(b=c.getAttributeNode("skinid"))&&
(h.skinid=b.nodeValue.toString());(b=a.getAttributeNode("width"))&&(h.w=b.nodeValue.toString());(b=a.getAttributeNode("height"))&&(h.h=b.nodeValue.toString());(b=a.getAttributeNode("wordwrap"))&&(h.wordwrap=1==b.nodeValue);J.push(h)}c=c.nextSibling}if("sounds"==a.nodeName)for(c=a.firstChild;c;){if("sound"==c.nodeName){h={id:"",url:"",loop:0,b:1,mode:1,pan:0,tilt:0,A:0,D:0};if(b=c.getAttributeNode("id"))h.id=b.nodeValue.toString();if(b=c.getAttributeNode("url"))h.url=b.nodeValue.toString();if(b=c.getAttributeNode("level"))h.b=
Number(b.nodeValue);if(b=c.getAttributeNode("loop"))h.loop=Number(b.nodeValue);if(b=c.getAttributeNode("mode"))h.mode=Number(b.nodeValue);if(b=c.getAttributeNode("pan"))h.pan=Number(b.nodeValue);if(b=c.getAttributeNode("tilt"))h.tilt=Number(b.nodeValue);if(b=c.getAttributeNode("pansize"))h.A=Number(b.nodeValue);if(b=c.getAttributeNode("tiltsize"))h.D=Number(b.nodeValue);m(h)}c=c.nextSibling}a=a.nextSibling}if(f){for(c=0;6>c;c++)(b=f.getAttributeNode("tile"+c+"url"))&&(Pa[c]=new String(b.nodeValue)),
b=f.getAttributeNode("tile"+c+"url1"),Ab[c]=b?new String(b.nodeValue):"";for(c=0;6>c;c++)(b=f.getAttributeNode("prev"+c+"url"))&&(ua[c]=new String(b.nodeValue));(b=f.getAttributeNode("tilesize"))&&(Bb=1*b.nodeValue);(b=f.getAttributeNode("tilescale"))&&(Qa=1*b.nodeValue)}xa?e&&(fa(Qa),ga()):(d.createCube(),d.k=0);d.addHotspotElements();d.dirty=j;cb&&d.divSkin&&d.divSkin.ggViewerInit&&d.divSkin.ggViewerInit();cb=s;d.hasConfig=j;wa()};this.openUrl=function(a,c){0<a.length&&(-1==a.indexOf("://")&&"/"!=
a.substr(0,1)&&(a=va+a),".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)?d.openNext(a,c):window.open(a,c))};this.openNext=function(a,c){d.isLoaded=s;d.hasConfig=s;d.checkLoaded=[];d.divSkin&&d.divSkin.ggReLoaded&&d.divSkin.ggReLoaded();Ua=0;d.skinObj&&d.skinObj.hotspotProxyOut&&d.skinObj.hotspotProxyOut(d.hotspot.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var b=c.replace("$cur",p+"/"+o+"/"+l),b=b.replace("$ap",p),b=b.replace("$at",o),b=b.replace("$af",l);d.readConfigUrl(a);
""!=b&&(b=b.split("/"),0<b.length&&d.setPan(Number(b[0])),1<b.length&&d.setTilt(Number(b[1])),2<b.length&&d.setFov(Number(b[2])));u()};d.detectBrowser();d.createLayers(f);d.u()}window.ggHasHtml5Css3D=Gb;window.ggHasWebGL=Vb;window.pano2vrPlayer=pano2vrPlayer;
